<html lang="ko">
<head>
    <meta charset="UTF-8">

    <!-- Boot strap -->
    <!-- 합쳐지고 최소화된 최신 CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.2/css/bootstrap.min.css">
    <!-- 부가적인 테마 -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.2/css/bootstrap-theme.min.css">
    <!-- 합쳐지고 최소화된 최신 자바스크립트 -->
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.2/js/bootstrap.min.js"></script>

    <style>
        .content {
            height: 75%;
        }

        .messageDiv {
            margin-top: 20px;
            margin-bottom: 50px;
        }

        .toDoDiv {

        }

        .custom-btn {
            font-size: 10px;
        }

        .panel-footer {
            height: 10%;
            color: gray;
        }
    </style>

    <title>To-Do</title>
</head>
<body>
<div class="container">
    <div class="header">
        <div class="page-header">
            <h1>To-do List <small>with Django</small></h1>
        </div>
    </div>
    <div class="content">
        <div class="messageDiv">
            <form action="newTodo/" method="POST">{% csrf_token %}
                <div class="input-group">
                    <input id="todoContent" name="todo_content" type="text" class="form-control"
                           placeholder="메모할 내용을 적어주세요">
                    <span class="input-group-btn">
                            <button class="btn btn-default" type="submit">메모하기!</button>
                        </span>
                </div>
            </form>
        </div>

        <div class="toDoDiv">
            <ul class="list-group">
                {% for todo in todos %}
                <form action="doneTodo/" method="GET" id="mutationForm">
                    <div class="input-group" name='todo1'>
                        <li class="list-group-item list-item-{{todo.id}}" data-id="{{ todo.id }}">{{ todo.content }}
                        </li>
                        <input type="hidden" id="todoNum" name="id" value="{{todo.id}}"/>
                        <span class="input-group-addon">
                                <button type="submit" class="custom-btn btn btn-danger">완료</button>
                            </span>
<!--                        <span class="input-group-addon">-->
<!--                            <button type="button" id="modify__btn" class="custom-btn btn btn-primary"-->
<!--                                    data-id="{{ todo.id }}">수정</button>-->
<!--                        </span>-->
                    </div>
                </form>
                {% endfor %}
            </ul>
        </div>
    </div>
    <div class="panel-footer">
        실전예제로 배우는 Django. Project1-TodoList
    </div>
</div>
<script>
    // const btnModify = document.querySelector('#modify__btn')
    // const items = document.querySelectorAll('.list-group-item')
    // items.forEach(item => item.addEventListener('click', e => {
    //         const id = parseInt(e.target.dataset.id, 10)
    //     console.log({ id })
    //     const todoField = document.querySelector(`.list-item-${id}`)
    //     const inputField = document.createElement('input')
    //     const tempText = todoField.textContent
    //     // todoField.textContent = ''
    //     inputField.value = tempText
    //     todoField.appendChild(inputField)
    //     todoField.addEventListener('focusout', () => {
    //         console.log(tempText)
    //         todoField.textContent = tempText
    //     })
    // }))
    //
    // btnModify.addEventListener('click', (e) => {
    //     const id = parseInt(e.target.dataset.id, 10)
    //     const todoField = document.querySelector(`.list-item-${id}`)
    //     const xhr = new XMLHttpRequest()
    //     xhr.open('POST', 'modifyTodo/')
    //     xhr.send({content: todoField.textContent})
    // })


</script>
</body>
</html>